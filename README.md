<h1><img width=80 src="https://github.com/MrQuackDuck/ImageEmojis/blob/master/src/main/resources/pack.png" /> <div>ImageEmojis</div></h1>

<p>
  <a href="https://www.java.com/"><img src="https://img.shields.io/badge/Java-blue.svg?logo=data:image/svg%2bxml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTguODUwOTggMTguNTZDOC44NTA5OCAxOC41NiA3LjkzMzk4IDE5LjA5NCA5LjUwMzk4IDE5LjI3NEMxMS40MDYgMTkuNDkyIDEyLjM3OCAxOS40NjEgMTQuNDczIDE5LjA2M0MxNC40NzMgMTkuMDYzIDE1LjAyNSAxOS40MDkgMTUuNzk0IDE5LjcwOUMxMS4wOTUgMjEuNzIyIDUuMTYwOTggMTkuNTkxIDguODUwOTggMTguNTZaTTguMjc1OTggMTUuOTMzQzguMjc1OTggMTUuOTMzIDcuMjQ3OTggMTYuNjk0IDguODE3OTggMTYuODU3QzEwLjg1IDE3LjA2NiAxMi40NTQgMTcuMDg0IDE1LjIzMSAxNi41NDlDMTUuMjMxIDE2LjU0OSAxNS42MTUgMTYuOTM4IDE2LjIxOCAxNy4xNTFDMTAuNTM5IDE4LjgxMiA0LjIxMDk4IDE3LjI4MSA4LjI3NTk4IDE1LjkzM1pNMTMuMTE2IDExLjQ3NUMxNC4yNzQgMTIuODA4IDEyLjgxMiAxNC4wMDggMTIuODEyIDE0LjAwOEMxMi44MTIgMTQuMDA4IDE1Ljc1MSAxMi40OSAxNC40MDEgMTAuNTlDMTMuMTQgOC44MTggMTIuMTczIDcuOTM4IDE3LjQwOCA0LjkwMkMxNy40MDggNC45MDEgOS4xOTE5OCA2Ljk1MyAxMy4xMTYgMTEuNDc1Wk0xOS4zMyAyMC41MDRDMTkuMzMgMjAuNTA0IDIwLjAwOSAyMS4wNjMgMTguNTgzIDIxLjQ5NUMxNS44NzEgMjIuMzE3IDcuMjk0OTggMjIuNTY0IDQuOTEzOTggMjEuNTI4QzQuMDU3OTggMjEuMTU1IDUuNjYzOTggMjAuNjM4IDYuMTY3OTggMjAuNTNDNi42OTQ5OCAyMC40MTYgNi45OTU5OCAyMC40MzcgNi45OTU5OCAyMC40MzdDNi4wNDI5OCAxOS43NjYgMC44Mzk5NzcgMjEuNzU0IDQuMzUyOTggMjIuMzI0QzEzLjkzMyAyMy44NzcgMjEuODE1IDIxLjYyNCAxOS4zMyAyMC41MDRaTTkuMjkxOTggMTMuMjFDOS4yOTE5OCAxMy4yMSA0LjkyOTk4IDE0LjI0NiA3Ljc0Nzk4IDE0LjYyMkM4LjkzNjk4IDE0Ljc4MSAxMS4zMDkgMTQuNzQ1IDEzLjUxOCAxNC41NkMxNS4zMjQgMTQuNDA4IDE3LjEzNiAxNC4wODMgMTcuMTM2IDE0LjA4M0MxNy4xMzYgMTQuMDgzIDE2LjQ5OSAxNC4zNTUgMTYuMDM4IDE0LjY3QzExLjYwOSAxNS44MzUgMy4wNTE5OCAxNS4yOTMgNS41MTU5OCAxNC4xMDJDNy41OTc5OCAxMy4wOTYgOS4yOTE5OCAxMy4yMSA5LjI5MTk4IDEzLjIxWk0xNy4xMTYgMTcuNTg0QzIxLjYxOSAxNS4yNDQgMTkuNTM3IDEyLjk5NSAxOC4wODQgMTMuMjk5QzE3LjcyOSAxMy4zNzMgMTcuNTY5IDEzLjQzNyAxNy41NjkgMTMuNDM3QzE3LjU2OSAxMy40MzcgMTcuNzAxIDEzLjIzIDE3Ljk1NCAxMy4xNEMyMC44MjkgMTIuMTI5IDIzLjA0IDE2LjEyMSAxNy4wMjYgMTcuNzAyQzE3LjAyNiAxNy43MDEgMTcuMDk2IDE3LjY0IDE3LjExNiAxNy41ODRaTTE0LjQwMSAwQzE0LjQwMSAwIDE2Ljg5NSAyLjQ5NCAxMi4wMzYgNi4zM0M4LjEzOTk4IDkuNDA3IDExLjE0OCAxMS4xNjIgMTIuMDM1IDEzLjE2NkM5Ljc2MDk4IDExLjExMyA4LjA5MTk4IDkuMzA4IDkuMjEwOTggNy42MjdDMTAuODU1IDUuMTU4IDE1LjQwOCAzLjk2MiAxNC40MDEgMFpNOS43MzM5OCAyMy45MjRDMTQuMDU2IDI0LjIwMSAyMC42OTMgMjMuNzcxIDIwLjg1IDIxLjcyNkMyMC44NSAyMS43MjYgMjAuNTQ4IDIyLjUwMSAxNy4yNzggMjMuMTE3QzEzLjU5IDIzLjgxMSA5LjAzODk4IDIzLjczIDYuMzQwOTggMjMuMjg1QzYuMzQwOTggMjMuMjg0IDYuODkzOTggMjMuNzQyIDkuNzMzOTggMjMuOTI0WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==&color=F07427" /></a>
  <a href="https://papermc.io/downloads/all"><img src="https://img.shields.io/badge/PaperMC-blue.svg?logo=data:image/svg%2bxml;base64,PHN2ZyB3aWR0aD0iNDYwIiBoZWlnaHQ9IjQ2MCIgdmlld0JveD0iMCAwIDQ2MCA0NjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik00NTEuNDMxIDE5LjQxMjdMOC45MDM4MyAxOTUuNjU1QzUuMTQ5MjggMTk3LjE1IDQuNjI3OTYgMjAyLjI1MSA4LjAwMjM5IDIwNC40NzVMMTIzLjU2OSAyODAuNjM5QzEyNS4zMjggMjgxLjc5OCAxMjcuNjIzIDI4MS43MzIgMTI5LjMxMSAyODAuNDczQzE1Ni43NTQgMjYwLjAxIDM3NS43ODEgOTYuOTgxNiAzNzIuNSAxMDguOTI4QzM2OS4yMDggMTIwLjkxNSAxOTUuMTg0IDI5OC43MjMgMTc0LjUwMiAzMTkuODI0QzE3My4yMzggMzIxLjExNSAxNzIuODEyIDMyMi45NCAxNzMuMzE1IDMyNC42NzVMMTk2LjYyMSA0MDUuMDAyQzE5Ny42ODYgNDA4LjY3MiAyMDIuMzA3IDQwOS44NCAyMDQuOTg3IDQwNy4xMTZMMjQyLjcyMyAzNjguNzYyQzI0NC4zNSAzNjcuMTA5IDI0Ni45MDEgMzY2Ljc5MSAyNDguODgzIDM2Ny45OTZMMzY3LjkwNyA0NDAuMjk4QzM3MC44NyA0NDIuMDk5IDM3NC43MjEgNDQwLjQwOSAzNzUuNDA1IDQzNy4wMUw0NTguMTgzIDI1LjA0MjlDNDU4Ljk2NSAyMS4xNTE0IDQ1NS4xMTkgMTcuOTQ0MSA0NTEuNDMxIDE5LjQxMjdaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K&color=0090FF" /></a>
  <a href="https://modrinth.com/plugin/image-emojis/"><img src="https://img.shields.io/badge/Modrinth-blue.svg?logo=modrinth&color=15C132&logoColor=FFFFFF" /></a>
  <a href="https://www.curseforge.com/minecraft/bukkit-plugins/image-emojis"><img src="https://img.shields.io/badge/Curse_Forge-blue.svg?logo=curseforge&color=2A2A2A&logoColor=F16436" /></a>
</p>

**ImageEmojis** is a **Paper (1.19.4+)** plugin that allows you to add your **custom emojis** on your server.<br>

> [!IMPORTANT]
> The max resolution of an emoji **256x256px**! Emojis should be stored in the **'.png'** format.

### ðŸ‘€ Screenshots
<img height=300 src="https://github.com/user-attachments/assets/df778e85-07ec-4daa-aec3-fa097e7973a7" />
<img height=300 src="https://github.com/user-attachments/assets/73008596-6bdc-4cdf-8d7a-3075358df7f7" />
<img width=620 src="https://github.com/user-attachments/assets/f9edf474-8836-40c5-8bc2-cd19150704ac" />
<img width=620 src="https://github.com/user-attachments/assets/351a9dcb-2b0a-47e6-ad2b-ee8e2af52cbe" /><br/>
<img width=620 src="https://github.com/user-attachments/assets/66b510f0-7b09-46c0-ad28-98ea3e2511d7" />
<img width=620 src="https://github.com/user-attachments/assets/a9138765-f220-4194-a447-b52f9c0f961c" />
<img width=620 src="https://github.com/user-attachments/assets/f78ec57a-aaa7-46bd-a312-db1058e156cf" />
<img width=620 src="https://github.com/user-attachments/assets/7b0d5d8d-85ed-453f-99db-bbdc8dda5e41" />

### ðŸ’» Commands

- `/emojis list` â€” opens a book with all currently added emojis.
- `/emojis update` â€” fetches the latest version of the emojis resource pack from the server. Intended to be used in case when the admin updated emojis and reloaded the plugin while you were playing. _(Alternatively, you can just rejoin and not use this command)_.
- `/emojis reload` â€” reloads the plugin. Generates the resource pack based on the `./plugins/ImageEmojis/emojis/` directory.

Aliases: `/ie`, `/imageemojis`.

### ðŸ”ž Permissions
- `imageemojis.admin` _(for **operators** by default)_ â€” Allows to use `/emojis reload`.
- `imageemojis.use` _(**true** by default)_ â€” Allows to use emojis as well as the `/emojis` command.
- `imageemojis.update` _(**true** by default)_ â€” Allows to use `/emojis update`.
- `imageemojis.list` _(**true** by default)_ â€” Allows to use `/emojis list`.

### ðŸŒ  Key features

- **Automated resource pack generation** â€” the resource pack is generated every time the plugin starts or gets reloaded. The only thing you need to do is to provide your server IP in the configuration and open the TCP port on the server _(**5000** by default)_.
- **Chat suggestions** - emoji suggestions when a player types a message in chat. You can choose from four suggestion modes:
  - `NONE` - disable chat suggestions.
  - `TEMPLATES` _(set by default)_ - suggest templates of emojis when typing (e.g., **\:clueless:**).
  - `ACTUAL` - suggest actual emojis (their UTF-8 symbols) when typing. (e.g., <img width=16 src="https://github.com/MrQuackDuck/ImageEmojis/blob/master/src/main/resources/pack.png" />).
  - `BOTH` - A combination of "TEMPLATES" and "ACTUAL" modes.
- Ability to **merge** emojis with your **server resource pack**: you can set the `mergeWithServerResourcePack` field to `true` in the `config.yml` and put your resource pack into the `../ImageEmojis/` directory with the `serverResourcePack.zip` filename _(the filename can be configured as well)_.
- **Sign replacement** â€” you can enable/disable replacement of emoji templates on signs.
- **Anvil replacement** â€” you can enable/disable replacement of emoji templates when renaming an item in the anvil.
- **Command replacement** â€” you can enable/disable replacement of emoji templates when sending commands. By default, the plugin automatically preprocesses all commands sent by players and changes emoji templates to actual emojis.
- **Discord integration** - if you have the **[DiscordSRV](https://modrinth.com/plugin/discordsrv)** plugin installed and set up, emoji templates will be translated into appropriate UTF-8 emoji symbols, and UTF-8 symbols will be preprocessed to be displayed correctly in Discord as emojis. This will work with emojis that have the same name both in the game and on the Discord server.

### ðŸ“„ Default config
> [!CAUTION]
> **Don't forget** to put your **public IP** into the `serverIp` field.<br>
> Also, you should **open the TCP port** on your machine for the plugin to work. <i>Port **5000** by default</i>.<br/>
> **Otherwise, nothing will work.**
```yaml
# Your server public IP goes here.
serverIp: "127.0.0.1"

# The port the resource pack will be hosted on. When the plugin launches, an HTTP server starts on that port.
# It should be opened on the machine so that players can download the resource pack.
webServerPort: 5000

# Resource pack enforcement policies:
# NONE - The resource pack won't be loaded on join. This option can fit servers where players prefer to download the resource pack manually.
# OPTIONAL - Players can decline the resource pack from loading on join.
# REQUIRED - Players are forced to play with the resource pack.
enforcementPolicy: "OPTIONAL"

# Replace emojis in anvils? (e.g., when renaming items)
replaceInAnvils: true
# Replace emojis on signs? (e.g., after editing them)
replaceOnSigns: true
# Replace emojis when sending a command? (e.g., in the "/msg" or "/say" commands)
replaceInCommands: true

# What will happen if a player doesn't have the "imageemojis.use" permission?:
# ERASE_EMOJIS - Erase all emojis from payload and proceed.
# CANCEL_EVENT - Cancel the event completely (e.g., prevent the message from being sent).
noPermAction:
  inChat: "ERASE_EMOJIS"
  inAnvils: "ERASE_EMOJIS"
  onSigns: "ERASE_EMOJIS"
  inCommands: "ERASE_EMOJIS"

# Whether a player will see the "Not enough permissions" message.
# Will be shown only for events with the "CANCEL_EVENT" action selected.
noPermMessage: false

# Whether an emoji name should appear when you put your cursor over the emoji symbol in the chat.
# This feature MAY NOT WORK if you use Spigot-native chat formatters such as "VaultChatFormatter" or "LPC" due to their incompatibility with Paper Components.
# If you are looking for a simple chat formatter that doesn't break messages, you may consider using mine: https://github.com/MrQuackDuck/PlainChatFormatter
emojiHoverEnabled: true
emojiHoverColor: "#AAAAAA"

# Chat suggestions modes (when typing a message in the chat and hitting TAB on the keyboard):
# NONE - No suggestions.
# TEMPLATES - Suggest templates (e.g., ":sob:").
# ACTUAL - Suggest actual emoji (e.g., "ðŸ˜­").
# BOTH - A combination of "TEMPLATES" and "ACTUAL" modes.
suggestionMode: "TEMPLATES"

# Emoji template format (e.g., you may replace colons or remove them completely).
templateFormat: ":<emoji>:"

# Should the plugin merge the "emojis.zip" resource pack with the server resource pack?
# If "true", you should put your resource pack in the "/plugins/ImageEmojis/" directory.
# The output will be generated within the "emojis.zip" archive.
mergeWithServerResourcePack: false
# Name of the resource pack to merge "emojis.zip" with.
mergeServerResourcePackName: "serverResourcePack.zip"

# When you use over ~500 emojis, you may see some emojis overlap each other (due to the hashing function being limited to a certain range).
# If you plan to use many emojis on your server, you may set this value to "true".
# IMPORTANT: Changing this will reset all existing emoji codes. This means:
#   - Previously written emojis on signs and item names will appear as invalid symbols;
#   - Range will be increased from 2000 to 6400 available emoji unicode symbols.
extendedUnicodeRange: false

messages:
  "resource-pack-description": "&nImage Emojis"
  "only-players": "&cOnly players can use this command!"
  "info-content": "&#F4CA16[ImageEmojis] &#B3BEC4There are currently &#D8E5EC&n%s&r&#B3BEC4 emojis!
    \n &#D8E5EC&n/emojis list&r&#B3BEC4 - see the emojis list.
    \n &#D8E5EC&n/emojis update&r&#B3BEC4 - fetch the latest version of the resource pack if it was updated during the current game session."
  "resource-pack-up-to-date": "&#F4CA16[ImageEmojis] &#B3BEC4The resource pack is now up to date!"
  "reloaded": "&#F4CA16[ImageEmojis] &#B3BEC4Reloaded!"
  "not-enough-permissions": "&#F4CA16[ImageEmojis] &#B3BEC4Not enough permissions."
  "command-not-found": "&#F4CA16[ImageEmojis] &cOops! That command doesn't exist, or you don't have enough permissions."
  "command-disabled": "&#F4CA16[ImageEmojis] &#B3BEC4This command is disabled on that server."
  "an-error-occurred": "&#F4CA16[ImageEmojis] &cAn error occurred during reload! Check the console logs for details."
```

### ðŸš€ Installation guide

> [!IMPORTANT]
> Before getting started, make sure the plugin's version is **compatible** with your server version.

1. Download the latest version of the plugin from the <a href="https://github.com/MrQuackDuck/ImageEmojis/releases">Releases</a> tab.
1. Put the downloaded `.jar` into the `./plugins` folder of your server.
1. Restart your server or enter the `reload` command.
1. Go to the `./plugins/ImageEmojis` directory and open `config.yml`.
1. Make sure to put your server's public IP into the `serverIp` field.
1. Open a **TCP port** _(**5000** by default)_ on your server equal to the `webServerPort` field from the `config.yml`.
1. Run the `/emojis reload` command.

> [!NOTE]
> You should disable your resource pack in `server.properties` if you enabled it earlier.

**Congrats!** Now you're ready to use the plugin. Put your emojis into the `../ImageEmojis/emojis/` directory, reload the plugin, and enter the `/emojis update` command on your client _(or just rejoin)_!
